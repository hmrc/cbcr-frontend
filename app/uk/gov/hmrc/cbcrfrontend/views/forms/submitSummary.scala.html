@*
 * Copyright 2017 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.play.views.html.helpers._
@import uk.gov.hmrc.cbcrfrontend.AppConfig
@import uk.gov.hmrc.cbcrfrontend.views.html._
@import uk.gov.hmrc.cbcrfrontend.model._
@import helper._

@(phaseBannerBeta: Html, summaryData: SummaryData, form:Form[_])(
implicit request: Request[_], messages: Messages)

@cbcDeclarationErrors = @{form.error("cbcDeclaration").isDefined}

@main_template("Country by Country Reporting") {
<main id="content" role="main">

    <div class="grid-row">
        <div class="column-full">
            <h1>
                @Messages("submitSummary.mainHeading")
            </h1>
            <table class="check-your-answers">
                <thead>
                <tr>
                    <th colspan="2">
                        <h2 class="heading-medium">
                            Your submission details
                        </h2>
                    </th>
                    <th>
                    </th>
                </tr>
                </thead>

                <tbody>
                <tr>
                    <td>
                        Registered multinational enterprise:
                    </td>
                    <td>
                        @{ if(summaryData.businessPartnerRecord.organisation.isDefined) summaryData.businessPartnerRecord.organisation.get.organisationName}<br />
                        Postcode: @summaryData.businessPartnerRecord.address.postalCode.getOrElse("")<br />
                        UTR: @summaryData.submissionMetaData.submissionInfo.utr.utr<br />
                        CbCID: @summaryData.submissionMetaData.submissionInfo.cbcId.value
                    </td>
                    <td>
                    </td>

                <tr>
                    <td>
                        Filing type:
                    </td>
                    <td>
                        @summaryData.submissionMetaData.submissionInfo.filingType.filingTypeText
                    </td>

                </tr>
                <tr>
                    <td>
                        Ultimate parent entity:
                    </td>
                    <td>
                        @summaryData.submissionMetaData.submissionInfo.ultimateParentEntity.ultimateParentEntity<br />
                    </td>

                </tr>
                <tr>
                    <td>
                        Filed by:
                    </td>
                    <td>
                        @summaryData.submissionMetaData.submitterInfo.fullName<br />
                        @summaryData.submissionMetaData.submitterInfo.agencyBusinessName<br />
                        @summaryData.submissionMetaData.submitterInfo.jobRole<br />
                        Tel: @summaryData.submissionMetaData.submitterInfo.contactPhone<br />
                        Email: @summaryData.submissionMetaData.submitterInfo.email.value
                    </td>

                </tr>
                <tr>
                    <td>
                        Filing capacity:
                    </td>
                    <td>
                        @summaryData.submissionMetaData.submissionInfo.filingCapacity.filingCapacityText
                    </td>

                </tr>
                <tr>
                    <td>
                        Report details:
                    </td>
                    <td>
                        <div>
                            <p><span class="faded-text faded-text--small">File name:</span><br />
                                @summaryData.submissionMetaData.fileInfo.name
                            </p>
                            <p><span class="faded-text faded-text--small">File size:</span><br />
                                @summaryData.submissionMetaData.fileInfo.length KB
                            </p>
                            <hr>
                            <h3>Key information from report XML</h3>

                            <p><span class="faded-text faded-text--small">MessageRefID:</span><br />
                                @summaryData.keyXMLFileInfo.messageRefID
                            </p>
                            <p><span class="faded-text faded-text--small">ReportingPeriod:</span><br />
                                @summaryData.keyXMLFileInfo.reportingPeriod
                            </p>
                            <p><span class="faded-text faded-text--small">TimeStamp:</span><br />
                                @summaryData.keyXMLFileInfo.timeStamp
                            </p>
                      </div>
                    </td>

                </tr>
                </tbody>
            </table>
            <h2 class="heading-medium">@Messages("submitSummary.confirmSubmit")</h2>
            <p class="text">

            </p>
            @helper.form(uk.gov.hmrc.cbcrfrontend.controllers.routes.Submission.confirm()) {
            @CSRF.formField

            @if(form.error("cbcDeclaration").isDefined){
            <div class="form-field--error">
            <span class="error-notification">@Messages("submitSummary.declaration.error.text")</span>

                <div class="multiple-choice">
                    <input id="cbc-report-submit-declaration" name="cbcDeclaration" type="checkbox" value="true" style="float:left; margin-right:10px; margin-top:3px;">
                    <label for="cbc-report-submit-declaration">@Messages("submitSummary.declaration.text")</label>
                </div>
            </div>
            } else {
                <div class="multiple-choice">
                    <input id="cbc-report-submit-declaration" name="cbcDeclaration" type="checkbox" value="true" style="float:left; margin-right:10px; margin-top:3px;">
                    <label for="cbc-report-submit-declaration">@Messages("submitSummary.declaration.text")</label>
                </div>
            }


                <p>
                    <button type="submit" role="button" id="btn-submitSummary">@Messages("submitSummary.submit")</button>
                </p>
            }

        </div>
    </div>

</main>
}
<p><a class="button" href="/country-by-country-reporting/submitSuccessReceipt" id="btn-submitReport">@Messages("submitSummary.submitReport")</a></p>
